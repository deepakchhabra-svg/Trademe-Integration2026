# RetailOS (safe example env)
# Copy to `.env` and fill in real values. Never commit `.env`.

# -----------------------------
# Core runtime
# -----------------------------
# Local dev (repo-root anchored default in code):
DATABASE_URL=sqlite:///data/retail_os.db

# Web â†’ API (Next.js uses this for server-side fetch + proxy routes)
NEXT_PUBLIC_API_BASE_URL=http://127.0.0.1:8000

# -----------------------------
# Trade Me API (optional; required for real validate/publish)
# -----------------------------
CONSUMER_KEY=your_trademe_consumer_key
CONSUMER_SECRET=your_trademe_consumer_secret
ACCESS_TOKEN=your_trademe_access_token
ACCESS_TOKEN_SECRET=your_trademe_access_token_secret

# -----------------------------
# LLM providers (optional; required for AI enrichment if enabled)
# -----------------------------
OPENAI_API_KEY=
GEMINI_API_KEY=
# GEMINI_MODEL=gemini-1.5-flash

# -----------------------------
# API security (recommended)
# -----------------------------
# CORS allowlist (comma-separated). Use your deployed web UI origin(s).
RETAIL_OS_CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
# Credentials should usually be off (recommended) because we use header tokens.
RETAIL_OS_CORS_ALLOW_CREDENTIALS=false

# Default role when no headers/tokens present.
RETAIL_OS_DEFAULT_ROLE=listing

# Do NOT allow privilege escalation via X-RetailOS-Role header (production-safe default).
RETAIL_OS_INSECURE_ALLOW_HEADER_ROLES=false

# Role tokens (set at least POWER for operator console endpoints).
# If unset, those roles cannot be authenticated.
RETAIL_OS_LISTING_TOKEN=
RETAIL_OS_FULFILLMENT_TOKEN=
RETAIL_OS_POWER_TOKEN=
RETAIL_OS_ROOT_TOKEN=

# -----------------------------
# Reliability (recommended)
# -----------------------------
# Global outbound HTTP throttling (caps supplier impact)
RETAILOS_HTTP_MAX_INFLIGHT=16
# Default requests-per-second per host (start-rate); use per-host overrides below if needed.
RETAILOS_HTTP_RPS_DEFAULT=6
# Example per-host override (optional):
# RETAILOS_HTTP_RPS_ONECHEQ_CO_NZ=3

# -----------------------------
# Scrape performance tuning (optional)
# -----------------------------
# Per-product image downloads (bounded; global throttle still applies)
RETAILOS_IMAGE_CONCURRENCY_PER_PRODUCT=4
RETAILOS_IMAGE_LIMIT_PER_PRODUCT=4

# ONECHEQ Shopify JSON tuning (optional)
RETAILOS_ONECHEQ_CONCURRENCY=8
RETAILOS_ONECHEQ_JSON_LIMIT=250

# ONECHEQ collection membership index (enables accurate source_category when scraping /collections/all)
RETAILOS_ONECHEQ_COLLECTION_INDEX_TTL_HOURS=24
RETAILOS_ONECHEQ_COLLECTION_INDEX_CONCURRENCY=4
RETAILOS_ONECHEQ_COLLECTION_INDEX_MAX_COLLECTIONS=2000


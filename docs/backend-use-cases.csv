type,use_case,trigger,method,uri_or_event,entry_file,handler_fn,input_keys,auth,db_entities,external_calls,side_effects,retries,notes
HTTP,Health Check,Load Balancer / Monitoring,GET,/health,services/api/main.py,health,None,Public,None,None,DB Probe,No,"Basic active check"
HTTP,Media Server,Frontend,GET,/media/{rel_path},services/api/main.py,media,rel_path,Token (Listing),None,Filesystem Read,None,No,"Protected asset delivery"
HTTP,Identity Debug,Frontend,GET,/whoami,services/api/main.py,whoami,None,Public/Header,None,None,None,No,"RBAC debugging"
HTTP,Operator Inbox,Frontend,GET,/ops/inbox,services/api/main.py,ops_inbox,None,Role (Power),SystemCommand;JobStatus;Order,None,None,No,"Aggregated counts"
HTTP,Ops Summary,Frontend,GET,/ops/summary,services/api/main.py,ops_summary,None,Role (Power),SystemCommand;Vaults;Orders,None,None,No,"KPI Dashboard"
HTTP,Pipeline Summary,Frontend,GET,/ops/pipeline_summary,services/api/main.py,ops_pipeline_summary,supplier_id,Role (Power),SupplierProduct;TradeMeListing,None,None,No,"End-to-end view"
HTTP,Supplier Detail,Frontend,GET,/ops/suppliers/{id}/pipeline,services/api/main.py,ops_supplier_pipeline,supplier_id,Role (Power),SystemCommand;SupplierProduct,None,None,No,"Active commands view"
HTTP,Account Health,Frontend,GET,/trademe/account_summary,services/api/main.py,trademe_account_summary,None,Role (Power),None,TradeMe API,None,No,"Live balance check"
HTTP,LLM Health,Frontend,GET,/llm/health,services/api/main.py,llm_health,None,Role (Power),None,LLM Provider,None,No,"Provider diagnostics"
HTTP,Validate Drafts,Frontend,POST,/trademe/validate_drafts,services/api/main.py,trademe_validate_drafts,"supplier_id, limit",Role (Power),InternalProduct,TradeMe API,None,No,"Batch validation"
Worker,Publish Listing,Command (User/System),CMD,PUBLISH_LISTING,retail_os/trademe/worker.py,handle_publish,"internal_product_id, dry_run, photo_path",Internal,TradeMeListing,TradeMe API (Photo/Listing),File Read/Write,Yes (3),"Golden Path"
Worker,Update Price,Command (User/System),CMD,UPDATE_PRICE,retail_os/trademe/worker.py,execute_logic,"listing_id, new_price",Internal,TradeMeListing;PriceHistory,TradeMe API,None,Yes (3),"Live price update"
Worker,Withdraw Listing,Command (User/System),CMD,WITHDRAW_LISTING,retail_os/trademe/worker.py,handle_withdraw,listing_id,Internal,TradeMeListing,TradeMe API,None,Yes (3),"Live withdraw"
Worker,Scrape Supplier,Command (Scheduler/System),CMD,SCRAPE_SUPPLIER,retail_os/trademe/worker.py,handle_scrape_supplier,"supplier_id, pages, collection",Internal,SupplierProduct,HTTP Scrape,DB Logs,Yes (3),"Generic runner"
Worker,Scrape OneCheq,Command (System),CMD,SCRAPE_OC,retail_os/trademe/worker.py,handle_scrape_oc,"items_limit",Internal,SupplierProduct,HTTP Scrape,DB Logs,Yes (3),"Legacy OneCheq runner"
Worker,Enrich Supplier,Command (Scheduler/System),CMD,ENRICH_SUPPLIER,retail_os/trademe/worker.py,handle_enrich_supplier,"supplier_id, batch_size",Internal,SupplierProduct;InternalProduct,LLM API,DB Updates,Yes (3),"Bulk enrichment"
Worker,Sync Orders,Command (Scheduler),CMD,SYNC_SOLD_ITEMS,retail_os/trademe/worker.py,handle_sync_sold_items,None,Internal,Order;TradeMeListing,TradeMe API,,Yes (3),"Heartbeat"
Worker,Sync Live Items,Command (Scheduler),CMD,SYNC_SELLING_ITEMS,retail_os/trademe/worker.py,handle_sync_selling_items,limit,Internal,TradeMeListing,TradeMe API,,Yes (3),"State reconciliation"
Worker,OneCheq Backfill,Command (User),CMD,ONECHEQ_FULL_BACKFILL,retail_os/trademe/worker.py,handle_onecheq_full_backfill,validate_n,Internal,Many,Many,Massive DB/File Ops,Yes (3),"Orchestrator"
Worker,Image Backfill,Command (User),CMD,BACKFILL_IMAGES_ONECHEQ,retail_os/trademe/worker.py,handle_backfill_images_onecheq,"batch, concurrency",Internal,SupplierProduct,HTTP Download,File Writes,Yes (3),"Maintenance"
Worker,Validate LaunchLock,Command (User),CMD,VALIDATE_LAUNCHLOCK,retail_os/trademe/worker.py,handle_validate_launchlock,limit,Internal,SupplierProduct,None,DB Updates,Yes (3),"Validation Suite"
Scheduler,Routine Scrape,Timer,JOB,scrape_all,retail_os/core/scheduler.py,scrape_job,None, Internal,SystemCommand,None,Enqueues Commands,N/A,"Auto-enqueue"
Scheduler,Routine Enrich,Timer,JOB,enrich_all,retail_os/core/scheduler.py,enrich_job,None, Internal,SystemCommand,None,Enqueues Commands,N/A,"Auto-enqueue"
Scheduler,Order Sync,Timer,JOB,sync_orders,retail_os/core/scheduler.py,orders_job,None, Internal,SystemCommand,None,Enqueues Commands,N/A,"Auto-enqueue"
Scheduler,State Sync,Timer,JOB,sync_trademe,retail_os/core/scheduler.py,trademe_sync_job,None, Internal,SystemCommand,None,Enqueues Commands,N/A,"Auto-enqueue"
CLI,Run Unified Pipeline,Manual (Shell),CLI,run_unified_pipeline.py,scripts/run_unified_pipeline.py,main,"--suppliers, --limit",Shell,SupplierProduct,HTTP Scrape,DB Updates,Manual,"Production Orchestrator"
CLI,Sync Sold Items,Manual (Shell),CLI,sync_sold_items.py,scripts/sync_sold_items.py,main,None,Shell,Order,TradeMe API,DB Updates,Manual,"Standalone daemon"
CLI,Enrichment Daemon,Manual (Shell),CLI,run_enrichment_daemon.py,scripts/run_enrichment_daemon.py,main,None,Shell,SupplierProduct,LLM API,DB Updates,Manual,"Standalone daemon"
CLI,OneCheq Full Backfill,Manual (Shell),CLI,onecheq_full_backfill.py,scripts/onecheq_full_backfill.py,main,None,Shell,Many,Many,Massive Ops,Manual,"CLI version of OneCheq Backfill"
CLI,Migrate DB,Manual (Shell),CLI,migrate_database.py,scripts/migrate_database.py,main,None,Shell,Schema,None,Schema Changes,Manual,"DB Migration"
